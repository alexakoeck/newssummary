<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Simple API Caller</title>
</head>
<body>
  <h2>Enter query to get summary</h2>
  <input type="text" id="queryInput" placeholder="Type something..." size="40" />
  <button id="fetchBtn">Submit</button>

  <h3>Result:</h3>
  <pre id="resultArea" style="white-space: pre-wrap; border: 1px solid #ccc; padding: 10px;"></pre>

  <script>
    async function fetchSummary() {
      const query = document.getElementById('queryInput').value.trim();
      const resultArea = document.getElementById('resultArea');

      if (!query) {
        resultArea.textContent = 'Please enter a query.';
        return;
      }

      const encodedQuery = encodeURIComponent(query);
      const url = `https://lm9xph2hqd.execute-api.us-west-2.amazonaws.com/dev/?data=${encodedQuery}`;

      resultArea.textContent = 'Loading...';

      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error(`HTTP error ${response.status}`);
        const data = await response.json();

        // Show the summary or whole JSON
        resultArea.textContent = data.summary || JSON.stringify(data, null, 2);
      } catch (err) {
        resultArea.textContent = 'Error: ' + err.message;
      }
    }

    document.getElementById('fetchBtn').addEventListener('click', fetchSummary);

    // Optional: allow pressing Enter key in input to trigger fetch
    document.getElementById('queryInput').addEventListener('keydown', function(e) {
      if (e.key === 'Enter') fetchSummary();
    });
  </script>
</body>
</html>

